<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: server.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: server.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @description Starting server file for project
 *
 * @name server
 * @requires express
 * @borrows {object} connectDB - DB connection to MongoDB
 */

const express = require("express");
const fs = require("fs");
const path = require("path");

const adminContactsPath = require("./routes/api/admin/contacts");
const adminUsersPath = require("./routes/api/admin/users");
const pubUserPath = require("./routes/api/pub/user");
// const authPath = require("./routes/api/auth");
// const businessesPath = require("./routes/api/businesses");
// const contactsPath = require("./routes/api/contacts");
// const emailBodiesPath = require("./routes/api/emailBodies");
// const mePath = require("./routes/api/me");
// const publicPath = require("./routes/api/_old/public");
// const subscribersPath = require("./routes/api/subscribers");
// const usersPath = require("./routes/api/users");

// const prototypePath = require("./routes/api/prototype");

const connectMongo = require("./config/scripts/mongo");
// const connectRedis = require("./config/scripts/redis");

global.__basedir = __dirname;

// Check if .env file exists
const rootDir = path.dirname(__dirname);
if (fs.existsSync(path.join(rootDir) + "/.env")) {
  require("dotenv").config();
} else {
  require("dotenv");
}

const app = express();

// DB connections
connectMongo();
// let redisClient = connectRedis();

// Init middleware
app.use(express.json());

// Routes
app.use("/api/v1/admin/contacts", adminContactsPath);
app.use("/api/v1/admin/users", adminUsersPath);
app.use("/api/v1/public/user", pubUserPath);
// app.use("/api/v1/admin/contacts", adminContactsPath);
// app.use("/api/v1/admin/contact", adminContactsPath);
// app.use("api/v1/public", publicPath);
// app.use("/api/auth", authPath); // User, Admin
// app.use("/api/businesses", businessesPath); // User, Admin
// app.use("/api/contacts", contactsPath); // Admin
// app.use("/api/emailbodies", emailBodiesPath); // User, Admin
// app.use("/api/subscribers", subscribersPath); // User, Admin, Email, Web
// app.use("/api/users", usersPath); // Admin, Email

// app.use("/api/me", mePath); // User

// app.use("/api/prototype", prototypePath); // Testing

const PORT = process.env.port || 5000;

app.listen(PORT, () => {
  console.clear();
  console.log("-------------------------------------------------------------");
  console.log(`Listening to port:  ${PORT}`);
  console.log(`      Environment:  ${process.env.NODE_ENV}`);
  console.log("-------------------------------------------------------------");
  console.log("Press ctrl+C to quit");
  console.log();
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-checkAddressFields.html">checkAddressFields</a></li><li><a href="module-checkContactFields.html">checkContactFields</a></li><li><a href="module-checkMongoId.html">checkMongoId</a></li><li><a href="module-checkNameFields.html">checkNameFields</a></li><li><a href="module-checkSocialMediaFields.html">checkSocialMediaFields</a></li><li><a href="module-connectDB.html">connectDB</a></li><li><a href="module-createContact.html">createContact</a></li><li><a href="module-createPendingEmail.html">createPendingEmail</a></li><li><a href="module-createQueryResponse.html">createQueryResponse</a></li><li><a href="module-deleteContact.html">deleteContact</a></li><li><a href="module-getAllContacts.html">getAllContacts</a></li><li><a href="module-getContactById.html">getContactById</a></li><li><a href="module-jsonResponse.html">jsonResponse</a></li><li><a href="module-postContact.html">postContact</a></li><li><a href="module-processFetchResponse.html">processFetchResponse</a></li><li><a href="module-putContact.html">putContact</a></li><li><a href="module-removeContact.html">removeContact</a></li><li><a href="module-routers_admin_contact.html">routers/admin/contact</a></li><li><a href="module-routers_user.html">routers/user</a></li><li><a href="module-scramble.html">scramble</a></li><li><a href="module-searchContacts.html">searchContacts</a></li><li><a href="module-updateContact.html">updateContact</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-routers_admin_contact-adminRouter_Contact.html">adminRouter_Contact</a></li><li><a href="module-routers_user-adminRouter_User.html">adminRouter_User</a></li><li><a href="publicRouter_PendingEmail.html">publicRouter_PendingEmail</a></li></ul><h3>Classes</h3><ul><li><a href="Contact.html">Contact</a></li></ul><h3>Global</h3><ul><li><a href="global.html#express">express</a></li><li><a href="global.html#NameSchema">NameSchema</a></li><li><a href="global.html#server">server</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri May 14 2021 19:10:56 GMT+1000 (Australian Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
